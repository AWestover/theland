<!DOCTYPE html>
<html lang="en">
<head>
  <!-- resize -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

  <!-- Icon -->
  <link rel="shortcut icon" type="image/png" href="/favicon.ico"/>

  <!-- style -->
  <link rel="stylesheet" type="text/css" href="style/index.css">

  <title>The Land</title>

  <!--jquery-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!--bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- node libraries -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Animal info -->
  <script src="code/constants.js" type="text/javascript"></script>
  <script src="configs/traits.js"></script>

</head>

<body>
  <script>
  if (document.URL.indexOf("https") == -1 && document.URL.indexOf("localhost") == -1) {
    window.location.href = document.URL.replace("http", "https");
  }
  </script>

  <script>setTimeout(function() {window.location.href="https://theland.surge.sh/";}, 60000);</script>

    <div class="container">
      <br>
      <button class="btn btn-lg well well-lg" style="float: right;"onclick="window.location.href='register.html';">Register</button>
      <form action="/" method="post">
        <h2 class="form-signin-heading">Please sign in</h2>
        <label for="unm">Username</label>
        <input name="unm" class="form-control" type="text" placeholder="User Name">
        <br>
        <label for="pwd">Password (If you do not wish to store your data you can play as a guest and leave this field blank)</label>
        <input name="pwd" class="form-control" type="password" placeholder="">
        <br>
        <label for="world">World</label>
        <input name="world" class="form-control" type="text" placeholder="World">
        <br>
        <label for="anType">Animal Type</label>
        <input name="anType" class="form-control" type="text" placeholder="shark">
        <br>
        <label class="btn btn-primary active form-check-label">
        <input name="soundWanted" type="checkbox" class="form-check-input" unchecked autocomplete="off"> Sound Wanted?
        </label>
        <br><br>
        <button class="btn btn-lg btn-primary btn-block" type="submit">Submit</button>
        <br><br>
      </form>
      <div id="animal_txt_help">
        <p>Types include: </p>
      </div>

      <div>
      <br>
      <button class="btn btn-lg well well-lg" id="button" style="float:left" onclick='window.location.href = "info.html";'>Help</button>
      <button class="btn btn-lg well well-lg" id="button" style="float:right; margin-left:5%" onclick='window.location.href = "credits.html";'>Credits</button>
      <button class="btn btn-lg well well-lg" id="button" style="float:right" onclick='window.location.href = "https://thelandcontact.wordpress.com/contact/";'>Contact</button>
      </div>

      <div>
      <br><br><br>
      <h1>Users</h1>
      <p id="users_info"></p>
      </div>

      <img src="pictures/logo.png" style="margin-bottom:5%">

    </div>

    <script src="style/arrayToTable.js" type="text/javascript"></script>
    <script>
      let pics = [];
      for (let j in animal_names["personals"])
      {
        let temp = "pictures/"+animal_names["personals"][j] + "1.png";
        temp = '<img src = "' + temp + '">';
        pics.push(temp);
      }
      let descriptions = [];
      for (let i in animal_names["personals"])
      {
        let tmp = personal_descriptions[animal_names["personals"][i]];
        tmp += "<br><br>";
        tmp += jsonToTable(["stat", "val"], personal_stats[animal_names["personals"][i]]);
        descriptions.push(tmp);
      }
      let data = [animal_names["personals"], descriptions, pics];
      let table = arrayToTable(["name", "description", "picture"], data);
      $("#animal_txt_help").append(table);
    </script>

    <script>
      let colNames = ["Name", "World", "theta", "animal type"];
      let userData = {};
      let userArray;
      let userTable;
      socket = io.connect();
      socket.on('gotData', handleGotData);
      function getUpdatedTable()
      {
        socket.emit('getData', "home");
      }
      getUpdatedTable();
      setInterval(getUpdatedTable, 3000);

      function handleGotData(data)
      {
        userData = data;
        userArray = [[],[],[], []];
        for (let i in userData)
        {
          for (let j in colNames)
          {
            userArray[j].push(userData[i][j]);
          }
        }
        userTable = arrayToTable(colNames, userArray);
        $("#users_info").html(userTable);
      }
    </script>


</body>

</html>
